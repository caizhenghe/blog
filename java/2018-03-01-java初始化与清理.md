# Java初始化与清理

| tag  | author     | date       | history                                           |
| ---- | ---------- | ---------- | ------------------------------------------------- |
| Java | caizhenghe | 2018-03-01 | create doc，add content of initialization objects |

[TOC]

## Java运行过程

```
javac HelloWorld.java
java HelloWorld
```

javac命令将.java文件编译成.class字节码文件，java命令后面跟着的是文件中的类名。

> 完整的过程是：Java源程序，Java编译器（编译），虚拟机（解释执行），解释器（翻译），机器码
>
> 虚拟机的工作流程：装载，链接，初始化，使用（包括实例化）

## 对象的创建过程

1. 首次创建对象（即使没有static关键字，构造器也是静态方法）或者类的静态方法/静态域首次被访问时，Java解释器会查找类路径，定位并载入.class文件（这将创建一个Class对象）。执行有关静态初始化的所有动作。静态初始化只在Class对象首次加载时进行。
2. 创建对象时，在堆上为对象分配足够的存储空间。将存储空间清零。
3. 执行所有出现于字段定义处的初始化动作。
4. 执行构造器。

> 与继承相结合，首次创建某个类的对象时，成员初始化顺序为：
>
> 父类静态变量，父类静态代码块，子类静态变量，子类静态代码块，
>
> 父类非静态变量，父类非静态代码块，父类构造函数，
>
> 子类非静态变量，子类非静态代码块，子类构造函数
>
> 

