# Java并发

| tag  | author     | date       | history    |
| ---- | ---------- | ---------- | ---------- |
| Java | caizhenghe | 2018-03-03 | create doc |

[TOC]

## synchronized

1. 修饰方法：本质上是锁住了类的this对象，当一个线程调用了某个对象中的synchronized方法时，这个对象的所有方法都不能被其它线程调用。如果修饰的静态方法，这个类的所有对象中的所有方法在同一时间都只能被一个线程独占。

   ```java
   public synchronized void get(int i, String name){}
   ```

2. 修饰代码块：跟修饰方法类似，新建一个对象，在要求互斥的代码块上锁住这个对象，在同一时间就只有一个线程访问该代码块了。这个新建对象不一定是Object类型，任意类型都可以，在一些对内存要比较抠门的项目中，可以新建一个byte[]类型的对象。

   ```java
   public void get(int i, String name) {
           synchronized (obj) {
               // todo
           }
   }
   ```

## volatile

> 用volatile修饰变量的一个最大特性就是使变量具有线程可见性，当一个线程中修改了volatile变量时，其他线程能够马上得到该变量的最新对象。但是volatile不能保证原子操作。